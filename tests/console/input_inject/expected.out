Testing input injection infrastructure...

--- Setup: Opening screen and window ---
OK: Screen opened
OK: Window opened with IDCMP_RAWKEY

--- Test 1: UserPort setup ---
OK: Window UserPort exists

--- Test 2: Inject string 'AB' ---
OK: test_inject_string() succeeded

--- Test 3: Receive injected IDCMP_RAWKEY events ---
  Received RAWKEY: code=0x00000020 qual=0x00000001
  Received RAWKEY: code=0x000000a0 qual=0x00000001
  Received RAWKEY: code=0x00000035 qual=0x00000001
  Received RAWKEY: code=0x000000b5 qual=0x00000001
Total RAWKEY events received: 0x00000004
OK: Received expected number of events

--- Test 4: Single keypress (Return key) ---
OK: test_inject_return() succeeded
  Received RAWKEY: code=0x00000044 (Return key)
  Received RAWKEY: code=0x000000c4 (Return key)
OK: Return key events received

--- Cleanup ---
OK: Window closed
OK: Screen closed

PASS: input_inject all tests passed
